<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>CoolSys</title>
    </head>
    <body>

        <h1>CoolSys HVAC</h1>
        <p>IDK</p>

        <form action="registeruser" method="post">
            <div class="form mb-3">
                <input type="text" class="form" id="name" name="name" placeholder="placeholder">
                <label for="name">First and Last Name</label>
            </div>

            <div class="form mb-3">
                <input type= "email" class="form" id="email" name="email" placeholder="placeholder">
                <label for="email">Email</label>
            </div>

            <div class="form mb-3">
                <input type="password" class="form" id="pass" name="pass" placeholder="placeholder">
                <label for="pass">Password</label>
            </div>

            <!--ADD CONFIRM PASSWORD
            <div class="form mb-3">

            </div>-->

            <div class="text-center">
                <button type="submit">Register</button>
            </div>
        </form>

        <div id="userList"></div>


        <script>
            async function viewUsers(){

                try{
                    const response = await fetch('/users');
                console.log("response status: ", response.status);
    
                if (response.ok) {
                    const users = await response.json();
                    //window.alert("response ok ", users);

                    userList = document.getElementById('userList');

                    users.forEach(user => {
                        const userDiv = document.createElement('div');

                        userDiv.innerHTML = `
                            <p>${user.name}, role: ${user.role}, email: ${user.email}
                        `;

                        userList.appendChild(userDiv);
                    });
                } else{
                    
                }
                } catch (error){
                    console.error('Network error during review retrieval:', error); 
                    alert("Network error. Please try again. ");
                    alert(error);
                }
                
            }
    
           document.addEventListener('DOMContentLoaded', async () => {
                await viewUsers();
           });
        </script>

    </body>

    
    
</html>
